# ApolloClient 3 <!-- .element: class="grey" -->

# Garbage collection

-----

## –û–Ω –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–∞–∫–∏ –ø–æ—è–≤–∏–ª—Å—è üéâ

-----

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GC? <!-- .element: class="green" -->

- –ù–∞—á–∏–Ω–∞—è —Å ROOT_QUERY, –±–µ–∂–∏—Ç –≤–≥–ª—É–±—å, —Å–æ–±–∏—Ä–∞—è __ref –≤ –∫–∞–∫–æ–π-–Ω–∏—Ç—å Set <!-- .element: class="fragment" -->
- –í—Ç–æ—Ä—ã–º –ø—Ä–æ—Ö–æ–¥–æ–º –ø—Ä–æ–±–µ–≥–∞–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –∫–ª—é—á–∞–º –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º –∫—ç—à–µ –∏ —É–¥–∞–ª—è–µ—Ç —Ç–µ –∑–∞–ø–∏—Å–∏: <!-- .element: class="fragment" -->
  - –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ Set'–µ <!-- .element: class="fragment" -->
  - –∏ –Ω–µ—Ç –≤ retain-set'–µ <!-- .element: class="fragment" -->

-----

### –†—É—á–Ω–∞—è —á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ <!-- .element: class="green" -->
  
<div class="fragment"><code>cache.retain(id)</code> ‚Äì –∑–∞—â–∏—Ç–∏—Ç –∑–∞–ø–∏—Å—å –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ GC</div>
<div class="fragment"><code>cache.release(id)</code> ‚Äì —Å–Ω–∏–º–µ—Ç –æ—Ç–º–µ—Ç–∫—É –∑–∞—â–∏—Ç—ã –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è</div>
<div class="fragment"><code>cache.evict(id)</code> ‚Äì —Å—Ä–∞–∑—É —É–¥–∞–ª–∏—Ç –∑–∞–ø–∏—Å—å –∏–∑ –∫—ç—à–∞ (–¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –∑–∞—â–∏—â–µ–Ω–∞ –≤ <code>retain-set'e</code>)</div>

-----

### –ê–≤—Ç–æ–º–∞—Ç–æ–º GC `–±—É–¥–µ—Ç` –≤—ã–∑—ã–≤–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç-–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è.

–ù–∞ —Ö—É–∫–∞—Ö –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç useEffect, <br />—á—Ç–æ–± –ø–æ–π–º–∞—Ç—å —Ñ–∞–∫—Ç –¥–µ-–º–æ–Ω—Ç–∏—Ä–æ–≤–∫–∏. <!-- .element: class="fragment orange" -->
